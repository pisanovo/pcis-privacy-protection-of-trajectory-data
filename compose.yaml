services:
  location_based_service:
    build: .
    volumes:
      - "./modules/location_based_service/:/code"
  echo_agent:
    build: .
    volumes:
      - "./modules/echo_agent/:/code"
    environment:
      - LOCATION_SERVER_URL=http://location_based_service:5000
  client:
    build: .
    ports:
      - "5000:5000"
    volumes:
      - "./modules/client/:/code"
    extra_hosts:
      - "host.docker.internal:host-gateway"
    environment:
      - CARLA_URL=host.docker.internal
      - CARLA_PORT=2000
      - ECHO_AGENT_URL=http://echo_agent:5000
